<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Logical Trilogies Explorer - @busse's Thread</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; padding: 0; }
    a.nav-link { text-decoration: none; }
    a.nav-link:hover .nav-label { text-decoration: underline; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
const trilogiesData = [
  {"id": 1, "user": "busse", "movies": ["Full Metal Jacket", "Apocalypse Now", "Fear and Loathing in Las Vegas"], "theme": "Vietnam War Madness", "likes": 183, "isOP": true},
  {"id": 6, "user": "marsarieswar", "movies": ["RoboCop", "Total Recall", "Starship Troopers"], "theme": "Verhoeven Satire", "likes": 84},
  {"id": 8, "user": "dangerous.moos", "movies": ["Saving Private Ryan", "Interstellar", "The Martian"], "theme": "Saving Matt Damon", "likes": 71},
  {"id": 33, "user": "den_the_hip", "movies": ["Shaun of the Dead", "Hot Fuzz", "The World's End"], "theme": "Cornetto Trilogy", "likes": 51},
  {"id": 9, "user": "detmachstudios", "movies": ["Time Bandits", "Brazil", "Baron Munchausen"], "theme": "Gilliam Dreams Trilogy", "likes": 39},
  {"id": 50, "user": "alexanderdcass", "movies": ["Apollo 13", "Gravity", "The Martian"], "theme": "Space Crisis Survival", "likes": 31},
  {"id": 44, "user": "ibeeric", "movies": ["Dark City", "Truman Show", "Pleasantville"], "theme": "Simulated Reality", "likes": 24},
  {"id": 72, "user": "janet_barnett_photography", "movies": ["Heathers", "Clueless", "Mean Girls"], "theme": "Teen Girl Comedy", "likes": 21},
  {"id": 55, "user": "reilly_skywalker93", "movies": ["Independence Day", "Pacific Rim", "Edge of Tomorrow"], "theme": "Alien Invasion", "likes": 18},
  {"id": 74, "user": "officialartaylor", "movies": ["The Thing", "Prince of Darkness", "In the Mouth of Madness"], "theme": "Carpenter Apocalypse Trilogy", "likes": 14},
  {"id": 7, "user": "michaeldegs", "movies": ["Chinatown", "LA Confidential", "The Big Lebowski"], "theme": "LA Noir", "likes": 14},
  {"id": 21, "user": "english_way_j_j", "movies": ["Schindler's List", "The Zone of Interest", "Downfall"], "theme": "WWII Holocaust", "likes": 7},
  {"id": 97, "user": "brooklyn_ellis66", "movies": ["The French Connection", "The Seven Ups", "To Live and Die in LA"], "theme": "Gritty Cop Thriller", "likes": 7},
  {"id": 58, "user": "condard", "movies": ["Wizard of Oz", "Children of Men", "Zardoz"], "theme": "Oz Connection", "likes": 6},
  {"id": 87, "user": "mikeynerd", "movies": ["Hero", "Crouching Tiger Hidden Dragon", "Kung Fu Hustle"], "theme": "Wuxia Martial Arts", "likes": 6},
  {"id": 10, "user": "disruptive_tactical", "movies": ["Solaris", "Event Horizon", "Pandorum"], "theme": "Space Horror", "likes": 5},
  {"id": 37, "user": "blakebyles", "movies": ["Fear and Loathing in Las Vegas", "Rango", "Dead Man"], "theme": "Johnny Depp Desert Journey", "likes": 5},
  {"id": 26, "user": "detroitvintagecity", "movies": ["Good Will Hunting", "Gone Baby Gone", "The Town"], "theme": "Boston Trilogy", "likes": 4},
  {"id": 80, "user": "danielmartin7094", "movies": ["Death Wish", "The Warriors", "Escape from New York"], "theme": "70s NYC Chaos", "likes": 4},
  {"id": 3, "user": "oversol", "movies": ["Planet of the Apes", "Omega Man", "Soylent Green"], "theme": "Charlton Heston Dystopia", "likes": 3},
  {"id": 20, "user": "jdhovland", "movies": ["Charly", "The Secret of NIMH", "Ratatouille"], "theme": "Intelligent Animals", "likes": 3},
  {"id": 51, "user": "mackademic", "movies": ["Power Rangers 2017", "Pacific Rim", "Edge of Tomorrow"], "theme": "Giant Mech", "likes": 3},
  {"id": 81, "user": "mattman_the_waydude", "movies": ["Vision Quest", "Full Metal Jacket", "Pacific Heights"], "theme": "Matthew Modine", "likes": 3},
  {"id": 103, "user": "bigsexysasquatch", "movies": ["Full Metal Jacket", "Apocalypse Now", "Jacob's Ladder"], "theme": "Vietnam Psychological", "likes": 3},
  {"id": 54, "user": "f_leist", "movies": ["Wind River", "Sicario", "Hell or High Water"], "theme": "Taylor Sheridan Modern Western", "likes": 2},
  {"id": 57, "user": "michaeldegs", "movies": ["Poor Things", "Frankenstein", "Edward Scissorhands"], "theme": "Created Beings", "likes": 2},
  {"id": 42, "user": "absolutely.willie", "movies": ["Saving Grace", "Half Baked", "Dogma"], "theme": "Stoner Films", "likes": 2},
  {"id": 75, "user": "jrcjohnny99", "movies": ["The Taking of Pelham 123", "Death Wish", "Report to the Commissioner"], "theme": "1974 NYC Gritty", "likes": 2},
  {"id": 77, "user": "seencapone", "movies": ["Dark City", "The Matrix", "The Thirteenth Floor"], "theme": "1999 Simulated Reality", "likes": 2},
  {"id": 84, "user": "devon_island", "movies": ["Willy Wonka and the Chocolate Factory", "Snowpiercer", "Nanook of the North"], "theme": "Survival Journey", "likes": 2},
  {"id": 86, "user": "enbiousbitch", "movies": ["Blade Runner", "Alien", "Planet of the Apes"], "theme": "Dystopian Sci-Fi Classic", "likes": 2},
  {"id": 90, "user": "vellectrum", "movies": ["The Apprentice", "Melania", "Weekend at Bernie's"], "theme": "Political Satire", "likes": 2},
  {"id": 101, "user": "pdenigris", "movies": ["Heat", "Drive", "To Live and Die in LA"], "theme": "LA Crime Style", "likes": 2},
  {"id": 112, "user": "marsarieswar", "movies": ["Colors", "Training Day", "End of Watch"], "theme": "LAPD Street Level", "likes": 2},
  {"id": 2, "user": "ltracks", "movies": ["Seven Samurai", "Magnificent Seven", "A Bug's Life"], "theme": "Remake Evolution", "likes": 0},
  {"id": 4, "user": "oversol", "movies": ["Repo Man", "Valley Girl", "Night of the Comet"], "theme": "80s LA Cult", "likes": 3},
  {"id": 5, "user": "oversol", "movies": ["Anderson Tapes", "Pelham 123", "The Hot Rock"], "theme": "NYC Heist", "likes": 3},
  {"id": 11, "user": "emceeartist", "movies": ["Romancing the Stone", "Jewel of the Nile", "War of the Roses"], "theme": "Douglas Turner Romance", "likes": 1},
  {"id": 12, "user": "mooncrime74", "movies": ["Rambo", "Missing In Action", "Uncommon Valor"], "theme": "80s Vietnam Rescue", "likes": 0},
  {"id": 13, "user": "mooncrime74", "movies": ["Wall Street", "Men At Work", "The War At Home"], "theme": "Charlie Sheen", "likes": 0},
  {"id": 14, "user": "mooncrime74", "movies": ["Biloxi Blues", "Stripes", "Good Morning Vietnam"], "theme": "Military Comedy", "likes": 0},
  {"id": 15, "user": "mooncrime74", "movies": ["Pocahontas", "Dances with Wolves", "Avatar"], "theme": "White Savior", "likes": 0},
  {"id": 16, "user": "mooncrime74", "movies": ["Clerks", "Chasing Amy", "Jay and Silent Bob Strike Back"], "theme": "Kevin Smith Universe", "likes": 0},
  {"id": 17, "user": "mooncrime74", "movies": ["Police Academy", "Idiocracy", "Escape from New York"], "theme": "Dystopian Comedy", "likes": 0},
  {"id": 18, "user": "mooncrime74", "movies": ["Goodfellas", "Analyze This", "Meet the Fockers"], "theme": "De Niro Comedy Arc", "likes": 0},
  {"id": 19, "user": "boring7111", "movies": ["Three Days of the Condor", "The Parallax View", "The Executioner"], "theme": "70s Paranoid Thriller", "likes": 1},
  {"id": 22, "user": "nicolaj_springborg", "movies": ["Eraserhead", "Blue Velvet", "Mulholland Drive"], "theme": "David Lynch Universe", "likes": 0},
  {"id": 23, "user": "thejohnljackson", "movies": ["Stand by Me", "The Sandlot", "Hook"], "theme": "Childhood Coming of Age", "likes": 0},
  {"id": 24, "user": "bradsturkie", "movies": ["Color Out of Space", "Annihilation", "Under the Skin"], "theme": "Alien Intrusion", "likes": 0},
  {"id": 25, "user": "ajt76", "movies": ["Munich", "You Don't Mess with the Zohan", "Inglourious Basterds"], "theme": "Jewish Revenge", "likes": 1},
  {"id": 27, "user": "thelfoley", "movies": ["Fistful of Dollars", "For A Few Dollars More", "The Good The Bad and the Ugly"], "theme": "Dollars Spaghetti Western", "likes": 0},
  {"id": 28, "user": "theaccusedj", "movies": ["Lone Survivor", "Deepwater Horizon", "Patriots Day"], "theme": "TrueBerg", "likes": 0},
  {"id": 29, "user": "aj_milner", "movies": ["Easy Rider", "Lost in America", "About Schmidt"], "theme": "American Road Trip", "likes": 0},
  {"id": 30, "user": "elchicles", "movies": ["The Exorcist", "Session 9", "Event Horizon"], "theme": "Supernatural Horror", "likes": 1},
  {"id": 31, "user": "peterbuddy", "movies": ["Arrival", "Sixth Sense", "Usual Suspects"], "theme": "Twist Endings", "likes": 0},
  {"id": 32, "user": "metaldakka", "movies": ["Twin Peaks", "Agents of SHIELD", "How I Met Your Mother"], "theme": "Kyle MacLachlan TV", "likes": 0},
  {"id": 34, "user": "enriguti", "movies": ["Commando", "Die Hard 2", "Predator"], "theme": "Val Verde", "likes": 1},
  {"id": 35, "user": "the_sober_traveler", "movies": ["Posse", "Rosewood", "The Harder They Fall"], "theme": "Black Western History", "likes": 0},
  {"id": 36, "user": "chetmcgruber", "movies": ["The Score", "Heat", "Den of Thieves"], "theme": "Heist Trilogy", "likes": 0},
  {"id": 38, "user": "joelawlers", "movies": ["Fear and Loathing in Las Vegas", "Rango", "The Rum Diary"], "theme": "Hunter S Thompson", "likes": 1},
  {"id": 39, "user": "canjewattitude", "movies": ["There Will Be Blood", "Fern Gully", "Interstellar"], "theme": "Oil Environment", "likes": 0},
  {"id": 40, "user": "sparty7799", "movies": ["The Post", "All the President's Men", "Frost Nixon"], "theme": "Nixon Watergate Era", "likes": 0},
  {"id": 41, "user": "hanover.fists.9", "movies": ["Nice Dreams", "Pee Wee's Big Adventure", "Blow"], "theme": "Drug Comedy to Drama", "likes": 0},
  {"id": 43, "user": "marcohuertas", "movies": ["One Battle After Another", "Civil War", "Children of Men"], "theme": "War Dystopia", "likes": 0},
  {"id": 45, "user": "perera.dylan", "movies": ["127 Hours", "All is Lost", "Into the Wild"], "theme": "Isolation Survival", "likes": 0},
  {"id": 46, "user": "perera.dylan", "movies": ["JFK", "Blow Out", "The Conversation"], "theme": "Paranoia Conspiracy", "likes": 0},
  {"id": 47, "user": "perera.dylan", "movies": ["Almost Famous", "Dazed and Confused", "Boogie Nights"], "theme": "70s 80s Nostalgia", "likes": 0},
  {"id": 48, "user": "electricpicturehall.chepstow", "movies": ["Ferris Bueller's Day Off", "Election", "Legally Blonde"], "theme": "Ambitious Protagonists", "likes": 0},
  {"id": 49, "user": "xipyro_maniacix", "movies": ["Frankenweenie", "Corpse Bride", "Nightmare Before Christmas"], "theme": "Tim Burton Stop Motion", "likes": 0},
  {"id": 52, "user": "mdwass99", "movies": ["Born on the Fourth of July", "The Deer Hunter", "Rambo First Blood"], "theme": "Vietnam Veterans", "likes": 0},
  {"id": 53, "user": "ludwigandtheangryinch", "movies": ["Who Can Kill a Child", "Antichrist", "Men"], "theme": "Everyone is Evil", "likes": 0},
  {"id": 56, "user": "amor_et_vinum", "movies": ["Menace II Society", "Blood In Blood Out", "Training Day"], "theme": "LA Gang Films", "likes": 0},
  {"id": 59, "user": "continentalll_drippp", "movies": ["The Road to El Dorado", "Atlantis The Lost Empire", "Titan AE"], "theme": "2000s Animated Adventure", "likes": 1},
  {"id": 60, "user": "parlaquin73", "movies": ["1917", "Journey's End", "All Quiet on the Western Front"], "theme": "WWI Trench Warfare", "likes": 0},
  {"id": 61, "user": "naypauer", "movies": ["Rudy", "Rocky", "The Karate Kid"], "theme": "Underdog Sports", "likes": 0},
  {"id": 62, "user": "omegaburn", "movies": ["American Graffiti", "Dazed and Confused", "Fast Times at Ridgemont High"], "theme": "Teen Coming of Age", "likes": 0},
  {"id": 63, "user": "frankjreynolds", "movies": ["Becket", "The Lion in Winter", "The Adventures of Robin Hood"], "theme": "Medieval England", "likes": 0},
  {"id": 64, "user": "ryan.loftus", "movies": ["Repo Man", "Under The Silver Lake", "Southland Tales"], "theme": "LA Weird", "likes": 1},
  {"id": 65, "user": "jeffbeersthekickassguy", "movies": ["Dazed and Confused", "Detroit Rock City", "The Stoned Age"], "theme": "70s Rock Party", "likes": 0},
  {"id": 66, "user": "dinunziojoe", "movies": ["Gone Baby Gone", "A Walk Among the Tombstones", "The Drop"], "theme": "Gritty Crime Drama", "likes": 0},
  {"id": 67, "user": "english_way_j_j", "movies": ["The Imitation Game", "Hidden Figures", "Pirates of Silicon Valley"], "theme": "Tech Pioneers", "likes": 1},
  {"id": 68, "user": "grimbybeck", "movies": ["One Flew Over the Cuckoo's Nest", "The Shawshank Redemption", "Dead Poets Society"], "theme": "Institutional Conformity", "likes": 0},
  {"id": 69, "user": "aaronsalus", "movies": ["The Anderson Tapes", "The Conversation", "Sliver"], "theme": "Surveillance", "likes": 0},
  {"id": 70, "user": "funky_tut", "movies": ["Close Encounters of the Third Kind", "Jaws", "All that Jazz"], "theme": "Spielberg Scheider", "likes": 0},
  {"id": 71, "user": "clownbaby404", "movies": ["Mothra", "Mothra vs Godzilla", "Ghidorah The Three Headed Monster"], "theme": "Kaiju", "likes": 0},
  {"id": 73, "user": "non_descript_person_82", "movies": ["Bring It On", "Stomp The Yard", "Drumline"], "theme": "Competition Performance", "likes": 1},
  {"id": 76, "user": "pigma_lyon", "movies": ["All the President's Men", "Three Days of the Condor", "The Parallax View"], "theme": "70s Political Thriller", "likes": 0},
  {"id": 78, "user": "groverstimulated", "movies": ["The Sword of Doom", "Le Samourai", "Ghost Dog"], "theme": "Lone Assassin", "likes": 1},
  {"id": 79, "user": "fnulps", "movies": ["Charlie and the Chocolate Factory", "Snowpiercer", "The Colony"], "theme": "Class Hierarchy Train", "likes": 1},
  {"id": 82, "user": "paulday1", "movies": ["The Mummy", "Van Helsing", "Deep Rising"], "theme": "Monster Adventure", "likes": 0},
  {"id": 83, "user": "knudson1353", "movies": ["The Out-Of-Towners", "Save The Tiger", "Glengarry Glen Ross"], "theme": "Jack Lemmon Stress", "likes": 1},
  {"id": 85, "user": "apoundofobscure", "movies": ["Shane", "High Plains Drifter", "Pale Rider"], "theme": "Mysterious Western Stranger", "likes": 1},
  {"id": 88, "user": "knudson1353", "movies": ["The Searchers", "Taxi Driver", "The Assassination of Richard Nixon"], "theme": "Obsessive Loner", "likes": 0},
  {"id": 89, "user": "sudonim2020", "movies": ["Collateral", "Layer Cake", "Prisoners"], "theme": "Crime Thriller", "likes": 0},
  {"id": 91, "user": "the_sulaco", "movies": ["ET", "Close Encounters", "War of the Worlds"], "theme": "Spielberg Aliens", "likes": 1},
  {"id": 92, "user": "hotsexcoldwine", "movies": ["Friday", "Half Baked", "Pineapple Express"], "theme": "Stoner Comedy", "likes": 0},
  {"id": 93, "user": "caractacusjack", "movies": ["Jerry Maguire", "Moneyball", "Air"], "theme": "Sports Business", "likes": 0},
  {"id": 94, "user": "dougom1", "movies": ["The Godfather", "Goodfellas", "Ghost Dog"], "theme": "Gangster G Movies", "likes": 1},
  {"id": 95, "user": "_tonywestside", "movies": ["The Big Short", "Margin Call", "Too Big To Fail"], "theme": "Financial Crisis", "likes": 0},
  {"id": 96, "user": "themoomabides", "movies": ["O Brother Where Art Thou", "Hail Caesar", "Jay Kelly"], "theme": "Clooney Entertainment Career", "likes": 1},
  {"id": 98, "user": "yeeeeooowwww", "movies": ["Speed", "Johnny Mnemonic", "The Matrix"], "theme": "Keanu Action", "likes": 0},
  {"id": 99, "user": "knudson1353", "movies": ["The Boys In The Band", "The Big Chill", "The Breakfast Club"], "theme": "Ensemble Reunion", "likes": 0},
  {"id": 100, "user": "skeetersauci", "movies": ["Porco Rosso", "The Wind Rises", "The Boy and the Heron"], "theme": "Miyazaki Flight Legacy", "likes": 1},
  {"id": 102, "user": "benallanwatkins", "movies": ["The Wrestler", "Black Swan", "The Whale"], "theme": "Aronofsky Extreme Performers", "likes": 1},
  {"id": 104, "user": "ulyssesbloomsday", "movies": ["Network", "Close Encounters", "Magnolia"], "theme": "Ensemble Epic", "likes": 0},
  {"id": 105, "user": "stefano.studio", "movies": ["The Imitation Game", "A Beautiful Mind", "The Theory of Everything"], "theme": "Genius Biopic", "likes": 1},
  {"id": 106, "user": "english_way_j_j", "movies": ["Platoon", "Apocalypse Now", "Born on the Fourth of July"], "theme": "Oliver Stone Vietnam", "likes": 1},
  {"id": 107, "user": "dragon_prince_ryu_445", "movies": ["She's All That", "Trojan War", "Sex Drive"], "theme": "Teen Road Trip Romance", "likes": 1},
  {"id": 108, "user": "nispeer89", "movies": ["Dazed and Confused", "Empire Records", "Superbad"], "theme": "Teen Hangout Comedy", "likes": 1},
  {"id": 109, "user": "marcinmichno", "movies": ["Finding Nemo", "Jaws", "The Meg"], "theme": "Ocean Predator", "likes": 0},
  {"id": 110, "user": "beer_and_loathing_in_knoxvegas", "movies": ["Tron", "The Last Starfighter", "Ready Player One"], "theme": "Video Game Reality", "likes": 0},
  {"id": 111, "user": "dudeitsshoe", "movies": ["Bill and Ted's Excellent Adventure", "Dude Where's My Car", "Harold and Kumar Go to White Castle"], "theme": "Dude Comedy", "likes": 1},
  {"id": 113, "user": "vinnie_talks_sht", "movies": ["Terminator", "Aliens", "Avatar"], "theme": "James Cameron Sci-Fi", "likes": 0},
  {"id": 114, "user": "english_way_j_j", "movies": ["War Games", "2001 A Space Odyssey", "Terminator 2"], "theme": "AI Awakening", "likes": 0},
  {"id": 115, "user": "jim.jingozian", "movies": ["Jaws", "Jaws 2", "Sorcerer"], "theme": "Roy Scheider Transformation", "likes": 1},
  {"id": 116, "user": "potthastdonald", "movies": ["Damsel", "Dragonslayer", "Dragonheart"], "theme": "Dragon Films", "likes": 0},
  {"id": 117, "user": "queencookiethug", "movies": ["Oppenheimer", "Terminator 3", "Zombieland"], "theme": "World Destruction", "likes": 2},
  {"id": 118, "user": "noob.f1", "movies": ["Home Alone", "Saw", "Dark City"], "theme": "Trapped Protagonist", "likes": 0},
  {"id": 119, "user": "che_wreckage", "movies": ["Full Metal Jacket", "Apocalypse Now", "Taxi Driver"], "theme": "Vietnam War Madness Alt", "likes": 3},
  {"id": 120, "user": "kitschensyngk", "movies": ["Time Bandits", "Brazil", "The Adventures of Baron Munchausen"], "theme": "Gilliam Dreams Trilogy", "likes": 1},
  {"id": 121, "user": "raamsheld", "movies": ["Eternal Sunshine of the Spotless Mind", "Memento", "One Flew Over the Cuckoo's Nest"], "theme": "Mind and Memory", "likes": 0},
  {"id": 122, "user": "menagerie.imaginaire", "movies": ["Stranger Than Paradise", "Down By Law", "Mystery Train"], "theme": "Jim Jarmusch", "likes": 0},
  {"id": 123, "user": "monkeymanb0b", "movies": ["Frankenstein", "Young Frankenstein", "Frankenhooker"], "theme": "Frankenstein Evolution", "likes": 4},
  {"id": 124, "user": "gk_jj_nhl", "movies": ["Frankenhooker", "Weird Science", "Poor Things"], "theme": "Created Women", "likes": 0},
  {"id": 125, "user": "pigma_lyon", "movies": ["Easy Rider", "Midnight Cowboy", "Panic in Needle Park"], "theme": "70s Drug Despair", "likes": 0},
  {"id": 126, "user": "pigma_lyon", "movies": ["Groundhog Day", "Edge of Tomorrow", "Source Code"], "theme": "Time Loop", "likes": 0},
  {"id": 127, "user": "naypauer", "movies": ["Planes Trains and Automobiles", "Uncle Buck", "Home Alone"], "theme": "John Hughes John Candy", "likes": 0},
  {"id": 128, "user": "shatabdi236", "movies": ["Downfall", "Schindler's List", "Grave of the Fireflies"], "theme": "WWII Tragedy", "likes": 0},
  {"id": 129, "user": "boxcutterbrigade", "movies": ["Quilombo", "The Last Supper", "Sankofa"], "theme": "African Resistance Americas", "likes": 1},
  {"id": 130, "user": "t.h.e.c.u.l.t", "movies": ["Heathers", "Jawbreaker", "Mean Girls"], "theme": "Mean Girls Trilogy", "likes": 2},
  {"id": 131, "user": "hotsexcoldwine", "movies": ["Harlem Nights", "Life", "A Soldier's Story"], "theme": "Black Cast Drama", "likes": 0},
  {"id": 132, "user": "leironmartija", "movies": ["Ex Machina", "Blade Runner", "Soldier"], "theme": "AI Android", "likes": 0},
  {"id": 133, "user": "simonzwa", "movies": ["A Million Ways to Die in the West", "Casa de mi Padre", "The Ridiculous Six"], "theme": "Western Comedy", "likes": 1},
  {"id": 134, "user": "juncruznaligas", "movies": ["Big", "The Big Short", "The Big Lebowski"], "theme": "Big Trilogy", "likes": 1},
  {"id": 135, "user": "nicolaj_springborg", "movies": ["Mulholland Drive", "Holy Motors", "Synecdoche New York"], "theme": "Surreal Acting Meta", "likes": 1},
  {"id": 136, "user": "chris_in_moseley", "movies": ["Fellowship of the Ring", "Empire Strikes Back", "The Grinch"], "theme": "Creative Chaos", "likes": 0},
  {"id": 137, "user": "r3conklin", "movies": ["Blow Up", "The Conversation", "Enemy of the State"], "theme": "Surveillance Paranoia", "likes": 0}
];

// â”€â”€ Utilities â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const toSlug = (str) =>
  str.toLowerCase()
    .replace(/[''\u2019]/g, '')
    .replace(/[^a-z0-9]+/g, '-')
    .replace(/^-+|-+$/g, '');

// â”€â”€ Data indices (built once) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const movieFrequency = {};
trilogiesData.forEach(t => {
  t.movies.forEach(m => {
    movieFrequency[m] = (movieFrequency[m] || 0) + 1;
  });
});

// Detect theme slug collisions
const _slugCount = {};
trilogiesData.forEach(t => {
  const s = toSlug(t.theme);
  _slugCount[s] = (_slugCount[s] || 0) + 1;
});

// Attach slug to each trilogy, disambiguate collisions with id suffix
const trilogyBySlug = {};
trilogiesData.forEach(t => {
  const base = toSlug(t.theme);
  t.slug = _slugCount[base] > 1 ? `${base}-${t.id}` : base;
  trilogyBySlug[t.slug] = t;
});

// Movie title lookup by slug
const movieBySlug = {};
const allMovieTitles = [...new Set(trilogiesData.flatMap(t => t.movies))];
allMovieTitles.forEach(title => {
  movieBySlug[toSlug(title)] = title;
});

// Movie -> trilogies map
const trilogiesByMovie = {};
trilogiesData.forEach(t => {
  t.movies.forEach(m => {
    if (!trilogiesByMovie[m]) trilogiesByMovie[m] = [];
    trilogiesByMovie[m].push(t);
  });
});

// â”€â”€ Hash Router â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const parseHash = (hash) => {
  const path = hash.replace(/^#\/?/, '');
  if (!path) return { page: 'home', slug: '' };
  const i = path.indexOf('/');
  if (i === -1) return { page: path, slug: '' };
  return { page: path.slice(0, i), slug: decodeURIComponent(path.slice(i + 1)) };
};

const useHashRouter = () => {
  const [route, setRoute] = React.useState(() => parseHash(window.location.hash));
  React.useEffect(() => {
    const onHash = () => {
      setRoute(parseHash(window.location.hash));
      window.scrollTo(0, 0);
    };
    window.addEventListener('hashchange', onHash);
    return () => window.removeEventListener('hashchange', onHash);
  }, []);
  return route;
};

// â”€â”€ Shared Components â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const NavLink = ({ to, className, children, external, title: titleAttr }) => {
  if (external) {
    return (
      <a href={to} target="_blank" rel="noopener noreferrer"
         title={titleAttr}
         className={`nav-link ${className || ''}`}
         onClick={e => e.stopPropagation()}>
        {children}
      </a>
    );
  }
  return (
    <a href={`#${to}`}
       title={titleAttr}
       className={`nav-link cursor-pointer ${className || ''}`}
       onClick={e => e.stopPropagation()}>
      {children}
    </a>
  );
};

const ThreadsUserLink = ({ user, className }) => (
  <NavLink external to={`https://www.threads.com/@${user}`}
           className={className || 'text-purple-400 hover:text-purple-300'}>
    <span className="nav-label">@{user}</span>
  </NavLink>
);

const Breadcrumb = ({ items }) => (
  <nav className="flex items-center gap-2 text-sm text-slate-400 mb-6 flex-wrap">
    <NavLink to="/" className="hover:text-white text-slate-400">
      <span className="nav-label">Explorer</span>
    </NavLink>
    {items.map((item, i) => (
      <React.Fragment key={i}>
        <span className="text-slate-600">/</span>
        {item.to ? (
          <NavLink to={item.to} className="hover:text-white text-slate-400">
            <span className="nav-label">{item.label}</span>
          </NavLink>
        ) : (
          <span className="text-white">{item.label}</span>
        )}
      </React.Fragment>
    ))}
  </nav>
);

const MoviePill = ({ movie, linked }) => {
  const freq = movieFrequency[movie] || 1;
  const pill = (
    <span className={`inline-block px-3 py-1 rounded-full text-sm mr-2 mb-2 transition-colors
                     ${freq > 1 ? 'bg-yellow-500/30 text-yellow-200 border border-yellow-500/50' : 'bg-slate-700 text-gray-300'}
                     ${linked ? 'hover:bg-yellow-500/50 cursor-pointer' : ''}`}>
      {movie} {freq > 1 && <span className="text-xs">{'\u00d7'}{freq}</span>}
    </span>
  );
  if (linked) {
    return <NavLink to={`/movie/${toSlug(movie)}`}>{pill}</NavLink>;
  }
  return pill;
};

// â”€â”€ Trilogy Detail Page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const TrilogyDetailPage = ({ slug }) => {
  const trilogy = trilogyBySlug[slug];
  if (!trilogy) return <NotFoundPage message={`Trilogy "${slug}" not found.`} />;

  const connectedTrilogies = React.useMemo(() => {
    const seen = new Set();
    const connections = [];
    trilogy.movies.forEach(movie => {
      (trilogiesByMovie[movie] || []).forEach(t => {
        if (t.id !== trilogy.id && !seen.has(t.id)) {
          seen.add(t.id);
          connections.push({ trilogy: t, sharedMovie: movie });
        }
      });
    });
    return connections;
  }, [slug]);

  React.useEffect(() => {
    document.title = `${trilogy.theme} - Logical Trilogies`;
  }, [slug]);

  return (
    <div className="max-w-4xl mx-auto px-6 py-8">
      <Breadcrumb items={[{ label: trilogy.theme }]} />

      <h1 className="text-3xl font-bold text-white mb-3">{trilogy.theme}</h1>
      <p className="text-slate-400 mb-1">
        by <ThreadsUserLink user={trilogy.user} />
        {trilogy.isOP && <span className="text-purple-400 ml-2">(Original Poster)</span>}
      </p>
      {trilogy.likes > 0 && (
        <p className="text-pink-400 text-lg mb-6">{trilogy.likes} likes</p>
      )}
      {!trilogy.likes && <div className="mb-6" />}

      <h2 className="text-white font-semibold mb-4 text-lg">The Trilogy</h2>
      <div className="space-y-3 mb-8">
        {trilogy.movies.map((m, i) => (
          <NavLink key={i} to={`/movie/${toSlug(m)}`} className="block">
            <div className="bg-slate-800 rounded-lg p-4 flex items-center hover:bg-slate-700 transition-colors">
              <span className="text-3xl font-bold text-slate-600 mr-4">{i + 1}</span>
              <div>
                <span className="text-white font-medium nav-label">{m}</span>
                {movieFrequency[m] > 1 && (
                  <span className="block text-yellow-400 text-xs mt-1">
                    Appears in {movieFrequency[m]} trilogies
                  </span>
                )}
              </div>
            </div>
          </NavLink>
        ))}
      </div>

      {connectedTrilogies.length > 0 && (
        <>
          <h2 className="text-white font-semibold mb-4 text-lg">Connected Trilogies</h2>
          <p className="text-slate-500 text-sm mb-3">Trilogies that share a movie with this one</p>
          <div className="space-y-2">
            {connectedTrilogies.map(({ trilogy: t, sharedMovie }) => (
              <NavLink key={t.id} to={`/trilogy/${t.slug}`} className="block">
                <div className="bg-slate-800 rounded-lg p-3 hover:bg-slate-700 transition-colors flex items-center justify-between">
                  <div>
                    <span className="text-white nav-label">{t.theme}</span>
                    <span className="text-slate-500 text-sm ml-2">
                      by <span className="text-purple-400">@{t.user}</span>
                    </span>
                  </div>
                  <span className="text-yellow-400 text-xs shrink-0 ml-2">via {sharedMovie}</span>
                </div>
              </NavLink>
            ))}
          </div>
        </>
      )}
    </div>
  );
};

// â”€â”€ Movie Detail Page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const MovieDetailPage = ({ slug }) => {
  const movieTitle = movieBySlug[slug];
  if (!movieTitle) return <NotFoundPage message={`Movie "${slug}" not found.`} />;

  const trilogies = trilogiesByMovie[movieTitle] || [];
  const freq = movieFrequency[movieTitle] || 1;

  const siblingMovies = React.useMemo(() => {
    const siblings = new Set();
    trilogies.forEach(t => t.movies.forEach(m => { if (m !== movieTitle) siblings.add(m); }));
    return [...siblings].sort();
  }, [slug]);

  React.useEffect(() => {
    document.title = `${movieTitle} - Logical Trilogies`;
  }, [slug]);

  return (
    <div className="max-w-4xl mx-auto px-6 py-8">
      <Breadcrumb items={[{ label: movieTitle }]} />

      <h1 className="text-3xl font-bold text-white mb-3">{movieTitle}</h1>
      <span className={`inline-block px-3 py-1 rounded-full text-sm mb-6
        ${freq > 1 ? 'bg-yellow-500/30 text-yellow-200 border border-yellow-500/50' : 'bg-slate-700 text-gray-300'}`}>
        {freq > 1 ? `Appears in ${freq} trilogies` : 'Appears in 1 trilogy'}
      </span>

      <h2 className="text-white font-semibold mb-4 text-lg">Featured In</h2>
      <div className="space-y-3 mb-8">
        {trilogies.sort((a, b) => b.likes - a.likes).map(t => (
          <NavLink key={t.id} to={`/trilogy/${t.slug}`} className="block">
            <div className="bg-slate-800 rounded-lg p-4 hover:bg-slate-700 transition-colors">
              <div className="flex justify-between items-start">
                <div>
                  <span className="text-white font-medium nav-label">{t.theme}</span>
                  <span className="text-slate-500 text-sm block mt-1">
                    by <ThreadsUserLink user={t.user} />
                  </span>
                </div>
                {t.likes > 0 && <span className="text-pink-400 shrink-0 ml-2">{t.likes} likes</span>}
              </div>
              <div className="mt-2 text-xs text-slate-500">
                {t.movies.map((m, i) => (
                  <span key={i}>
                    <span className={m === movieTitle ? 'text-yellow-300' : ''}>{m}</span>
                    {i < 2 && <span className="mx-1">{'\u2192'}</span>}
                  </span>
                ))}
              </div>
            </div>
          </NavLink>
        ))}
      </div>

      {siblingMovies.length > 0 && (
        <>
          <h2 className="text-white font-semibold mb-4 text-lg">Related Movies</h2>
          <p className="text-slate-500 text-sm mb-3">Other movies from the same trilogies</p>
          <div className="flex flex-wrap">
            {siblingMovies.map(m => (
              <MoviePill key={m} movie={m} linked />
            ))}
          </div>
        </>
      )}
    </div>
  );
};

// â”€â”€ Not Found Page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const NotFoundPage = ({ message }) => {
  React.useEffect(() => {
    document.title = 'Not Found - Logical Trilogies';
  }, []);

  return (
    <div className="max-w-4xl mx-auto px-6 py-16 text-center">
      <h1 className="text-4xl font-bold text-white mb-4">Not Found</h1>
      <p className="text-slate-400 mb-6">{message || 'The page you are looking for does not exist.'}</p>
      <NavLink to="/" className="text-purple-400 hover:text-purple-300">
        <span className="nav-label">Back to Explorer</span>
      </NavLink>
    </div>
  );
};

// â”€â”€ Explorer Page (the original home view) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function ExplorePage({ initialSearch }) {
  const [view, setView] = React.useState('list');
  const [search, setSearch] = React.useState(initialSearch || '');
  const [sortBy, setSortBy] = React.useState('likes');
  const [selected, setSelected] = React.useState(null);

  React.useEffect(() => {
    document.title = 'Logical Trilogies Explorer';
  }, []);

  const filteredData = React.useMemo(() => {
    let data = [...trilogiesData];

    if (search) {
      const s = search.toLowerCase();
      data = data.filter(t =>
        t.theme.toLowerCase().includes(s) ||
        t.user.toLowerCase().includes(s) ||
        t.movies.some(m => m.toLowerCase().includes(s))
      );
    }

    if (sortBy === 'likes') {
      data.sort((a, b) => b.likes - a.likes);
    } else if (sortBy === 'theme') {
      data.sort((a, b) => a.theme.localeCompare(b.theme));
    } else if (sortBy === 'user') {
      data.sort((a, b) => a.user.localeCompare(b.user));
    }

    return data;
  }, [search, sortBy]);

  const stats = React.useMemo(() => {
    const allMovies = trilogiesData.flatMap(t => t.movies);
    const uniqueMovies = [...new Set(allMovies)];
    const sharedMovies = Object.entries(movieFrequency).filter(([_, count]) => count > 1);
    const contributors = [...new Set(trilogiesData.map(t => t.user))];

    return {
      totalTrilogies: trilogiesData.length,
      uniqueMovies: uniqueMovies.length,
      sharedMovies: sharedMovies.length,
      totalLikes: trilogiesData.reduce((sum, t) => sum + t.likes, 0),
      contributors: contributors.length,
      topContributor: Object.entries(
        trilogiesData.reduce((acc, t) => {
          acc[t.user] = (acc[t.user] || 0) + 1;
          return acc;
        }, {})
      ).sort((a, b) => b[1] - a[1])[0]
    };
  }, []);

  const sharedMoviesList = Object.entries(movieFrequency)
    .filter(([_, count]) => count > 1)
    .sort((a, b) => b[1] - a[1]);

  return (
    <div className="max-w-6xl mx-auto px-6 py-6">
      {/* Stats Cards */}
      <div className="grid grid-cols-2 md:grid-cols-6 gap-4 mb-6">
        {[
          { label: 'Trilogies', value: stats.totalTrilogies, icon: 'ðŸŽ¯' },
          { label: 'Unique Movies', value: stats.uniqueMovies, icon: 'ðŸŽ¬' },
          { label: 'Shared Movies', value: stats.sharedMovies, icon: 'ðŸ”—', highlight: true },
          { label: 'Total Likes', value: stats.totalLikes, icon: 'â¤ï¸' },
          { label: 'Contributors', value: stats.contributors, icon: 'ðŸ‘¥' },
          { label: 'Top Contributor', value: `@${stats.topContributor[0]}`, subvalue: `${stats.topContributor[1]} trilogies`, icon: 'ðŸ‘‘' },
        ].map((stat, i) => (
          <div key={i} className={`rounded-xl p-4 ${stat.highlight ? 'bg-yellow-500/20 border border-yellow-500/30' : 'bg-slate-800'}`}>
            <div className="text-xl mb-1">{stat.icon}</div>
            <div className="text-xl font-bold text-white">{stat.value}</div>
            <div className="text-slate-400 text-xs">{stat.label}</div>
            {stat.subvalue && <div className="text-slate-500 text-xs">{stat.subvalue}</div>}
          </div>
        ))}
      </div>

      {/* Controls */}
      <div className="flex flex-wrap gap-4 mb-6">
        <input
          type="text"
          placeholder="Search movies, themes, or users..."
          value={search}
          onChange={e => setSearch(e.target.value)}
          className="flex-1 min-w-64 bg-slate-800 border border-slate-700 rounded-lg px-4 py-2
                    text-white placeholder-slate-500 focus:outline-none focus:border-purple-500"
        />
        <select
          value={sortBy}
          onChange={e => setSortBy(e.target.value)}
          className="bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white"
        >
          <option value="likes">Sort by Likes</option>
          <option value="theme">Sort by Theme</option>
          <option value="user">Sort by User</option>
        </select>
        <div className="flex rounded-lg overflow-hidden border border-slate-700">
          {['list', 'grid', 'connections'].map(v => (
            <button
              key={v}
              onClick={() => setView(v)}
              className={`px-4 py-2 text-sm capitalize
                         ${view === v ? 'bg-purple-600 text-white' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}
            >
              {v}
            </button>
          ))}
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Main Content */}
        <div className="lg:col-span-2">
          {view === 'list' && (
            <div className="space-y-3 max-h-[70vh] overflow-y-auto pr-2">
              {filteredData.map((t, i) => (
                <div
                  key={t.id}
                  onClick={() => setSelected(t)}
                  className={`p-4 rounded-xl cursor-pointer transition-all duration-200
                             ${selected?.id === t.id ? 'bg-gradient-to-r from-purple-600/50 to-blue-600/50 border border-purple-400' : 'bg-slate-800 hover:bg-slate-700'}`}
                >
                  <div className="flex items-start justify-between">
                    <div className="flex items-center gap-3">
                      <span className={`text-2xl font-bold ${i < 3 ? 'text-yellow-400' : 'text-slate-500'}`}>
                        #{i + 1}
                      </span>
                      <div>
                        <NavLink to={`/trilogy/${t.slug}`} className="text-white font-semibold hover:text-purple-300">
                          <span className="nav-label">{t.theme}</span>
                        </NavLink>
                        <p className="text-slate-400 text-sm">
                          <ThreadsUserLink user={t.user} />
                          {t.isOP && <span className="text-purple-400 ml-1">(OP)</span>}
                        </p>
                      </div>
                    </div>
                    <div className="text-right">
                      <span className="text-pink-400 font-bold">{t.likes > 0 ? `${t.likes} likes` : ''}</span>
                    </div>
                  </div>
                  <div className="mt-3 flex items-center text-slate-300 text-sm flex-wrap">
                    {t.movies.map((m, j) => (
                      <span key={j} className="flex items-center">
                        <NavLink to={`/movie/${toSlug(m)}`}
                                 className={`hover:underline ${movieFrequency[m] > 1 ? 'text-yellow-300' : 'text-slate-300'}`}>
                          <span className="nav-label">{m}</span>
                        </NavLink>
                        {j < 2 && <span className="mx-2 text-slate-500">{'\u2192'}</span>}
                      </span>
                    ))}
                  </div>
                </div>
              ))}
            </div>
          )}

          {view === 'grid' && (
            <div className="grid grid-cols-2 gap-4 max-h-[70vh] overflow-y-auto pr-2">
              {filteredData.map((t, i) => (
                <div
                  key={t.id}
                  onClick={() => setSelected(t)}
                  className={`p-4 rounded-xl cursor-pointer transition-all
                             ${selected?.id === t.id ? 'bg-purple-600/30 border border-purple-400' : 'bg-slate-800 hover:bg-slate-700'}`}
                >
                  <div className="flex justify-between items-start mb-2">
                    <span className="text-xs text-slate-500">#{i + 1}</span>
                    {t.likes > 0 && <span className="text-pink-400 text-sm">{t.likes} likes</span>}
                  </div>
                  <NavLink to={`/trilogy/${t.slug}`} className="text-white font-semibold mb-1 text-sm hover:text-purple-300">
                    <span className="nav-label">{t.theme}</span>
                  </NavLink>
                  <p className="text-slate-500 text-xs mb-2">
                    <ThreadsUserLink user={t.user} className="text-slate-500 hover:text-purple-400" />
                  </p>
                  <div className="flex flex-wrap">
                    {t.movies.map((m, j) => (
                      <MoviePill key={j} movie={m} linked />
                    ))}
                  </div>
                </div>
              ))}
            </div>
          )}

          {view === 'connections' && (
            <div className="bg-slate-800 rounded-xl p-6 max-h-[70vh] overflow-y-auto">
              <h3 className="text-white font-semibold mb-4">Movies in Multiple Trilogies</h3>
              <p className="text-slate-400 text-sm mb-4">
                These movies appear in more than one "logical trilogy" - they're connection points in the data!
              </p>
              {sharedMoviesList.length > 0 ? (
                <div className="space-y-4">
                  {sharedMoviesList.map(([movie, count]) => {
                    const trilogiesWithMovie = trilogiesData.filter(t => t.movies.includes(movie));
                    return (
                      <div key={movie} className="bg-slate-900 rounded-lg p-4">
                        <div className="flex justify-between items-center mb-2">
                          <NavLink to={`/movie/${toSlug(movie)}`} className="text-yellow-300 font-semibold text-lg hover:text-yellow-200">
                            <span className="nav-label">{movie}</span>
                          </NavLink>
                          <span className="bg-yellow-500/20 text-yellow-300 px-2 py-0.5 rounded-full text-sm">
                            {count} trilogies
                          </span>
                        </div>
                        <div className="space-y-1">
                          {trilogiesWithMovie.map(t => (
                            <NavLink key={t.id} to={`/trilogy/${t.slug}`}
                                     className="text-slate-400 text-sm hover:text-white block">
                              <span className="nav-label">
                                {'\u2192'} <span className="text-slate-300">{t.theme}</span>
                                <span className="text-slate-500"> by @{t.user}</span>
                                {t.likes > 0 && <span className="text-pink-400 ml-2">({t.likes} likes)</span>}
                              </span>
                            </NavLink>
                          ))}
                        </div>
                      </div>
                    );
                  })}
                </div>
              ) : (
                <p className="text-slate-500">No movies appear in multiple trilogies in the current filter.</p>
              )}
            </div>
          )}
        </div>

        {/* Sidebar */}
        <div className="lg:col-span-1">
          {selected ? (
            <div className="bg-slate-800 rounded-xl p-6 sticky top-6">
              <div className="flex justify-between items-start mb-4">
                <NavLink to={`/trilogy/${selected.slug}`} className="text-xl font-bold text-white hover:text-purple-300">
                  <span className="nav-label">{selected.theme}</span>
                </NavLink>
                <button
                  onClick={() => setSelected(null)}
                  className="text-slate-500 hover:text-white text-xl ml-2 shrink-0"
                >
                  {'\u2715'}
                </button>
              </div>
              <p className="text-slate-400 mb-4">
                by <ThreadsUserLink user={selected.user} />
                {selected.isOP && <span className="text-purple-400 ml-1">(Original Poster)</span>}
              </p>
              {selected.likes > 0 && (
                <p className="text-pink-400 mb-4 text-lg">{selected.likes} likes</p>
              )}
              <h4 className="text-white font-semibold mb-3">The Trilogy:</h4>
              <div className="space-y-3">
                {selected.movies.map((m, i) => (
                  <NavLink key={i} to={`/movie/${toSlug(m)}`} className="block">
                    <div className="bg-slate-900 rounded-lg p-3 flex items-center hover:bg-slate-800 transition-colors">
                      <span className="text-3xl font-bold text-slate-600 mr-4">{i + 1}</span>
                      <div>
                        <span className="text-white font-medium nav-label">{m}</span>
                        {movieFrequency[m] > 1 && (
                          <span className="block text-yellow-400 text-xs mt-1">
                            Also in {movieFrequency[m] - 1} other {movieFrequency[m] - 1 === 1 ? 'trilogy' : 'trilogies'}
                          </span>
                        )}
                      </div>
                    </div>
                  </NavLink>
                ))}
              </div>
              <div className="mt-4 pt-4 border-t border-slate-700">
                <NavLink to={`/trilogy/${selected.slug}`} className="text-purple-400 hover:text-purple-300 text-sm">
                  <span className="nav-label">View full details {'\u2192'}</span>
                </NavLink>
              </div>
            </div>
          ) : (
            <div className="bg-slate-800 rounded-xl p-6 sticky top-6">
              <h3 className="text-white font-semibold mb-3">Quick Stats</h3>
              <div className="space-y-2 text-sm">
                <p className="text-slate-400">
                  <span className="text-white">{filteredData.length}</span> trilogies showing
                </p>
                <p className="text-slate-400">
                  <span className="text-white">{sharedMoviesList.length}</span> shared movies
                </p>
              </div>
              <hr className="border-slate-700 my-4" />
              <h4 className="text-white font-semibold mb-2">Top Trilogies</h4>
              <div className="space-y-2">
                {trilogiesData.slice(0, 5).map((t, i) => (
                  <NavLink key={t.id} to={`/trilogy/${t.slug}`}
                           className="text-sm text-slate-400 hover:text-purple-400 block">
                    <span className="nav-label">
                      {i + 1}. {t.theme} <span className="text-pink-400">({t.likes} likes)</span>
                    </span>
                  </NavLink>
                ))}
              </div>
              <hr className="border-slate-700 my-4" />
              <h4 className="text-white font-semibold mb-2">Most Connected</h4>
              <div className="space-y-1">
                {sharedMoviesList.slice(0, 5).map(([movie, count]) => (
                  <NavLink key={movie} to={`/movie/${toSlug(movie)}`}
                           className="text-sm text-yellow-300 hover:text-yellow-200 block">
                    <span className="nav-label">{movie} <span className="text-slate-500">({count})</span></span>
                  </NavLink>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>

      <div className="mt-8 text-center text-slate-600 text-sm">
        Data from <NavLink external to="https://www.threads.com/@busse/post/DUGELJelUo6" className="text-slate-500 hover:text-slate-400"><span className="nav-label">@busse's Thread</span></NavLink> {'\u00b7'} 28.8K views {'\u00b7'} 282 replies {'\u00b7'} Built with React + Tailwind
      </div>
    </div>
  );
}

// â”€â”€ App Shell â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function App() {
  const route = useHashRouter();

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
      {/* Header */}
      <div className="bg-gradient-to-r from-purple-900/50 to-blue-900/50 border-b border-slate-700">
        <div className="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
          <div>
            <a href="#/" className="no-underline">
              <h1 className="text-3xl font-bold text-white mb-1 hover:text-purple-200 transition-colors">
                Logical Trilogies Explorer
              </h1>
            </a>
            <p className="text-slate-400">
              Interactive visualization of @busse's viral Threads post
            </p>
          </div>
          <nav className="flex items-center gap-3 md:gap-4 shrink-0">
            <a href="https://www.threads.com/@busse" target="_blank" rel="noopener noreferrer"
               title="Threads"
               className="text-slate-400 hover:text-white transition-colors flex items-center gap-1.5 text-sm">
              <svg className="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017c.03-3.579.879-6.43 2.525-8.482C5.845 1.205 8.6.024 12.18 0h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-1.104-3.96-3.898-5.984-8.304-6.015-2.91.022-5.11.936-6.54 2.717C4.307 6.504 3.616 8.914 3.59 12c.025 3.083.718 5.496 2.057 7.164 1.432 1.784 3.631 2.698 6.54 2.717 2.623-.02 4.358-.631 5.798-2.045 1.647-1.613 1.618-3.593 1.09-4.798-.31-.71-.873-1.3-1.634-1.718-.203 1.386-.643 2.543-1.327 3.441-1.043 1.368-2.614 2.112-4.543 2.153h-.06c-1.57-.03-2.853-.566-3.715-1.553-.786-.9-1.2-2.1-1.196-3.473.01-2.904 2.04-4.882 5.05-4.916h.06c1.37.013 2.514.388 3.406 1.112.404.328.73.715.978 1.15.266-.505.447-1.076.538-1.71l2.027.28c-.18 1.316-.622 2.434-1.29 3.287l.009.006c.87.562 1.591 1.342 2.088 2.265.757 1.404 1.07 3.17.487 5.038-.802 2.57-2.814 4.39-5.82 5.267-1.352.394-2.843.593-4.434.604zm-.828-7.404c1.255-.027 2.212-.456 2.843-1.283.515-.675.85-1.584.996-2.693-.398-.376-.928-.655-1.573-.831-.6-.164-1.275-.248-2.006-.248h-.051c-1.958.023-3.107 1.2-3.114 3.004-.003.87.256 1.578.75 2.046.481.455 1.174.693 2.005.71h.15z"/></svg>
              <span className="hidden md:inline">Threads</span>
            </a>
            <a href="https://github.com/busse/threads-trilogies" target="_blank" rel="noopener noreferrer"
               title="GitHub"
               className="text-slate-400 hover:text-white transition-colors flex items-center gap-1.5 text-sm">
              <svg className="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
              <span className="hidden md:inline">GitHub</span>
            </a>
            <a href="https://github.com/busse/threads-trilogies/tree/main/obsidian-vault" target="_blank" rel="noopener noreferrer"
               title="Obsidian Vault"
               className="text-slate-400 hover:text-white transition-colors flex items-center gap-1.5 text-sm">
              <svg className="w-5 h-5 md:w-4 md:h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1.27c-6.075 0-11 4.925-11 11 0 4.226 2.385 7.89 5.882 9.735l.282-2.584c-2.2-1.483-3.647-3.994-3.647-6.85 0-2.085.774-3.993 2.05-5.45l2.02 1.858a7.17 7.17 0 00-1.553 4.464c0 2.082.89 3.957 2.307 5.27l.265-2.427A4.91 4.91 0 017.14 12.3c0-1.078.347-2.076.935-2.89l2.042 1.878a2.686 2.686 0 00-.46 1.504c0 1.483 1.204 2.687 2.687 2.687 1.482 0 2.686-1.204 2.686-2.687 0-1.482-1.203-2.686-2.686-2.686-.175 0-.345.017-.51.05L9.784 8.184A7.135 7.135 0 0112.344 7.6c3.956 0 7.165 3.208 7.165 7.165 0 2.665-1.458 4.994-3.618 6.233l.282 2.584C19.668 21.726 22.05 18.062 22.05 13.837c0-5.96-4.83-10.79-10.79-10.79L12 1.27z"/></svg>
              <span className="hidden md:inline">Obsidian Vault</span>
            </a>
          </nav>
        </div>
      </div>

      {/* Route content */}
      {route.page === 'home' && <ExplorePage />}
      {route.page === 'trilogy' && <TrilogyDetailPage slug={route.slug} />}
      {route.page === 'movie' && <MovieDetailPage slug={route.slug} />}
      {route.page === 'search' && <ExplorePage initialSearch={decodeURIComponent(route.slug)} />}
      {!['home', 'trilogy', 'movie', 'search'].includes(route.page) && <NotFoundPage />}

      <div className="pb-8" />
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
  </script>
</body>
</html>
